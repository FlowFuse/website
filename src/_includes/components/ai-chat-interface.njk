<div class="ai-chat-container mx-auto mt-10" style="max-width: 800px;">
    <div class="ai-chat-box">
        <div class="textarea-wrapper relative mb-4 h-40 p-4 pb-12 rounded-lg overflow-hidden">
            <textarea 
                placeholder="Tell us what you are trying to build and the FlowFuse Expert Assistant will create a guide to get you up and running quickly"
                class="w-full h-full bg-transparent border-0 focus:outline-none text-gray-600 placeholder-gray-400 resize-none"
                aria-label="Describe your workflow"
            ></textarea>
            <div class="absolute bottom-3 left-4 text-[10px] font-light text-gray-500 pr-36 line-clamp-2">
                Uses OpenAI GPT-4.1 Mini trained on FlowFuse's knowledge base
            </div>
            <button class="absolute bottom-3 right-4 ff-btn ff-btn--primary uppercase whitespace-nowrap px-6 py-3" onclick="if(typeof capture === 'function') capture('cta-ai-tell-me-how', {'position': 'hero'})">
                Tell Me How
            </button>
        </div>
    </div>
    
    <div class="ai-prompts mt-4">
        <div class="flex flex-wrap gap-2 mb-3">
            <button class="prompt-pill text-left px-4 py-2 bg-white backdrop-blur rounded-full text-sm text-gray-600 hover:bg-white hover:shadow-sm transition-all border border-indigo-600" data-prompt="Create a dashboard for machine data">
                Create a dashboard for machine data
            </button>
            <button class="prompt-pill text-left px-4 py-2 bg-white backdrop-blur rounded-full text-sm text-gray-600 hover:bg-white hover:shadow-sm transition-all border border-indigo-600" data-prompt="Publish modbus to UNS">
                Publish modbus to UNS
            </button>
            <button class="prompt-pill text-left px-4 py-2 bg-white backdrop-blur rounded-full text-sm text-gray-600 hover:bg-white hover:shadow-sm transition-all border border-indigo-600" data-prompt="Convert OPC-UA to MQTT">
                Convert OPC-UA to MQTT
            </button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const homeTextarea = document.querySelector('textarea[aria-label="Describe your workflow"]');
    if (homeTextarea) {
        // Auto-focus the homepage textarea when page loads
        homeTextarea.focus();
        
        // Responsive placeholder text
        const fullPlaceholder = "Tell us what you are trying to build and the FlowFuse Expert Assistant will create a guide to get you up and running quickly";
        const shortPlaceholder = "Tell us what you are trying to build";
        
        function updatePlaceholder() {
            // Use 480px breakpoint to target mobile phones
            if (window.innerWidth < 480) {
                homeTextarea.placeholder = shortPlaceholder;
            } else {
                homeTextarea.placeholder = fullPlaceholder;
            }
        }
        
        // Set initial placeholder
        updatePlaceholder();
        
        // Update on window resize
        window.addEventListener('resize', updatePlaceholder);
    }
});
</script>
