<div class="flex flex-col justify-between ff-blog container m-auto text-left max-w-4xl pt-8 pb-12 w-full ff-full-bg">
    <div>
        <div class="px-2 flex items-center gap-12">
            <h1 class="mb-0">Certified Nodes</h1>
            <div class="flex-grow">
            {% include "components/divider-grey-wires-right.njk" %}
            </div>
        </div>

        <div class="px-2 my-4 flex gap-4">
        <p>
        {% if description %}
            {{ description }}
        {% else %}    
        Explore a curated selection of Node-RED modules that have undergone a rigorous certification process to meet the highest standards. Our certified nodes excel in three core pillars: <span class="font-medium">Quality, Security, and Support.</span> 
        {% endif %} 
        </p> 
        </div>
        <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 px-2 mt-6">
        {%- asyncEach node in certifiedNodes | filterNodeCategory(category)  -%}
        <li class="w-full border bg-white rounded-lg hover:drop-shadow-lg hover:border-red-600 transition ease-in-out duration-300">
            {%- set templateFile = "src/_includes/certified/nodes/" + node.title | slugify + ".md" %}
            {%- set templateFileUrl = "/certified-nodes/" + node.title | slugify + "/" %}
            <a href=
              {%- if templateFile | templateExists %}
                "{{ templateFileUrl }}"
              {%- else %}
                "{{ node.url }}" target="_blank"
              {%- endif %}
            class="w-full h-full flex flex-col group hover:no-underline px-4 py-3">
                <div>
                    <div class="text-gray-400 flex flex-row justify-between">
                            <label class="w-full">
                                {% for tag in node.tags %}
                                    {{ tag | capitalize | replace("-", " ") | replace("Flowfuse", "FlowFuse") }}
                                {% endfor %}
                            </label>
                        {% if not (templateFile | templateExists) %}
                        <div class="w-[20px]">
                            {% include "components/icons/arrow-top-right-on-square.svg" %}
                        </div>
                        {% endif %}
                    </div>
                    <h3 class="mt-1 mb-0 font-medium">{{ node.title }}</h3>
                </div>
                <div class="text-sm prose prose-blue md:prose-md py-1">
                    {{ node.description | excerpt | safe }}
                </div>
            </a>
        </li>        
        {%- endeach -%}
        </ul>
    </div> 
    <div class="flex w-full justify-center mt-6 border-t">
        {% include "blog/pagination.njk" %}
    </div>  
</div>